
{% load static %}
{% load cart_tag %}


<!-- header-start -->
<header class="header white-bg">
    <div class="header-top">
        <div class="container">
            <div class="header-inner">
                <div class="row align-items-center">
                    <div class="col-xl-6 col-lg-7">
                        <div class="header-inner-start pt-2">
                            {% if user.is_authenticated %}
                                <p>
                                    Welome,
                                    {% if user.first_name == "" or user.first_name == None %}
                                        {{user.email}} | <b>{{user.username}}</b>

                                    {% else %}
                                        {{user.first_name}} {{user.last_name}}
                                    {% endif %}
                                </p>

                            {% else %}
                            <p>You are using as a <st   rong>Guest</strong></p>
                            {% endif %}


                            

                        </div>
                    </div>
                    <div class="col-xl-6 col-lg-5 d-none d-lg-block">
                        <div class="header-inner-end text-md-end">
                            <div class="ovic-menu-wrapper">
                                <ul>
                                    {% comment %} <li><a href="about.html">About Us</a></li> {% endcomment %}
                                    <li><a href="contact.html">Order Tracking</a></li>
                                    {% comment %} <li><a href="contact.html">Contact Us</a></li> {% endcomment %}
                                    <li><a href="faq.html">FAQs</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="header-mid">
        <div class="container">
            <div class="heade-mid-inner">
                <div class="row align-items-center">
                    <div class="col-xl-3 col-lg-3 col-md-4 col-sm-4">
                        <div class="header__info">
                            <div class="logo">
                                <a href="{% url 'home' %}" class="logo-image"><img src="{% static 'assets/img/logo/logo.png' %}" alt="logo"></a>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-5 col-lg-4 d-none d-lg-block">
                        <div class="header__search">
                            <form action="#">
                                <div class="header__search-box">
                                    <input class="search-input" type="text" placeholder="I'm shopping for...">
                                    <button class="button" type="submit"><i class="far fa-search"></i></button>
                                </div>
                                <div class="header__search-cat">
                                    <select>
                                        <option>All Categories</option>
                                        {% for i in main_cat %}
                                        <option><a>{{i.name}}</a></option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="col-xl-4 col-lg-5 col-md-8 col-sm-8">
                        <div class="header-action">
                            {% if user.is_authenticated %}
            <div class="block-userlink">
                <form id="logout-form" action="{% url 'logout' %}" method="post" >
                    {% csrf_token %}
                    <button type="submit" class="icon-link" style="background: none; border: none; cursor: pointer;">
                        <i class="flaticon-user"></i>
                        <span class="text">
                            <span class="sub">Logout</span>
                            My Account
                        </span>
                    </button>
                </form>
            </div>
        {% else %}
            <div class="block-userlink">
                <a class="icon-link" href="{% url 'login' %}">
                    <i class="flaticon-user"></i>
                    <span class="text">
                        <span class="sub">Login</span>
                        My Account
                    </span>
                </a>
            </div>
        {% endif %}
                            <div class="block-wishlist action">
                                <a class="icon-link" href="wishlist.html">
                                <i class="flaticon-heart"></i>
                                <span class="count">0</span>
                                <span class="text">
                                <span class="sub">Favorite</span>
                                My Wishlist </span>
                                </a>
                            </div>
                            <div class="block-cart action">
                                <a class="icon-link" href="{% url 'cart_detail' %}">
                                <i class="flaticon-shopping-bag"></i>
                                <span class="count">{{ cart_count }}</span>
                                <span class="text">
                                <span class="sub">Your Cart:</span>
                                {{ cart_total_amount }} </span>
                                </a>
                                <div class="cart">
                                    <div class="cart__mini">
                                        <ul>
                                            <li>
                                              <div class="cart__title">
                                                <h4>Your Cart</h4>
                                              </div>
                                            </li>
                                            <li>

                                                {% for key,value in request.session.cart.items %}
                                              <div class="cart__item d-flex justify-content-between align-items-center">
                                                <div class="cart__inner d-flex">
                                                  <div class="cart__thumb">
                                                    <a href="product-details.html">
                                                      <img src="{{value.image}}" alt="sopmax" style="height:50px; width:auto;">
                                                    </a>
                                                  </div>
                                                  <div class="cart__details">
                                                    <h6><a href="product-details.html"> {{value.name}}  </a></h6>
                                                    <div class="cart__price">
                                                      <span>&#2547; {{value.price}}</span>
                                                    </div>
                                                  </div>
                                                </div>
                                                <div class="cart__del">
                                                    <a href="#"><i class="fal fa-times"></i></a>
                                                </div>
                                              </div>
                                            </li>
                                            <li>
                                              
                                              {% endfor %}
                                            </li>
                                            <li>
                                                <a href="{% url 'cart_detail' %}" class="wc-cart mb-10">View cart</a>
                                                <a href="{% url 'checkout' %}" class="wc-checkout">Checkout</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="header__bottom">
        <div class="container">
            <div class="row g-0 align-items-center">
                <div class="col-lg-3">                        
                    <div class="cat__menu-wrapper side-border d-none d-lg-block">
                        <div class="cat-toggle">
                            <button type="button" class="cat-toggle-btn cat-toggle-btn-1"><i class="fal fa-bars"></i> Shop by department</button>
                            <div class="cat__menu">
                                <nav id="mobile-menu" style="display: block;">
                                    <ul>

                                        {% for i in main_cat %}
                                        <li>
                                            <a href="">{{i.name}} <i class="far fa-angle-down"></i></a>
                                            <ul class="mega-menu">

                                                {% for cat in i.category_set.all %}
                                                <li><a href="/product/?categoryID={{cat.id}}">{{cat.name}}</a>
                                                    <ul class="mega-item">

                                                        {% for subcat in cat.sub_category_set.all %}
                                                        <li><a href="/product/?categoryID={{cat.id}}">{{subcat.name}}</a></li>
                                                        {% endfor %}
                                                    </ul>
                                                </li>

                                                {% endfor %}

                                                
                                                </li>
                                            </ul>
                                        </li>
                                        {% endfor %}

                                        {% comment %} <li><a href="shop.html">Health &amp; Beauty</a></li> {% endcomment %}
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-3">
                  <div class="header__bottom-left d-flex d-xl-block align-items-center">
                    <div class="side-menu d-lg-none mr-20">
                      <button type="button" class="side-menu-btn offcanvas-toggle-btn"><i class="fas fa-bars"></i></button>
                    </div>
                    <div class="main-menu d-none d-lg-block">
                        <nav>
                            <ul>
                                <li>
                                    <a href="{% url 'home' %}" class="active">Home</a>
                                   
                                </li>
                                {% comment %} <li><a href="{% url 'about-us' %}">About Us</a></li>
                                <li><a href="{% url 'contact-us' %}">Contact Us</a></li> {% endcomment %}
                                <li><a href="{% url 'product' %}">Product</a></li>
                                <li><a href="{% url 'cart_detail' %}">My Cart</a></li>
                                <li><a href="{% url 'checkout' %}">Checkout</a></li>

                                <li><a href="{% url 'order' %}">My Orders <i class="far fa-angle-down"></i></a>
                                    <ul class="submenu">
                                        <li><a href="{% url 'order' %}">Order</a></li>
                                        <li><a href="blog-details.html">Order Tracking</a></li>
                                    </ul>
                                </li>
                                {% comment %} <li><a href="{% url 'logout' %}">logout</a></li> {% endcomment %}
                            </ul>
                        </nav>
                    </div>
                  </div>
                </div>
                
            </div>
        </div>
    </div>
</header>
<!-- header-end -->